// MetricCard - Large value display with label, unit, and optional trend
// Composes Material FilledCard with custom content layout

import { FilledCard } from "@material";

export struct MetricData {
    label: string,
    value: string,
    unit: string,
    trend: string,        // "up", "down", "stable", or ""
    trend-value: string,  // e.g., "+5%", "-2°"
}

export component MetricCard inherits Rectangle {
    in property <MetricData> data;
    in property <color> accent-color: #3AA1F5;
    in property <bool> compact: false;
    
    callback clicked();
    
    width: compact ? 180px : 220px;
    height: compact ? 100px : 140px;
    
    FilledCard {
        width: 100%;
        height: 100%;
        
        TouchArea {
            clicked => { root.clicked(); }
            
            VerticalLayout {
                padding: compact ? 12px : 16px;
                spacing: compact ? 4px : 8px;
                
                // Label
                Text {
                    text: data.label;
                    font-size: compact ? 11px : 13px;
                    color: #9E9E9E;
                    horizontal-alignment: left;
                }
                
                // Value + Unit
                HorizontalLayout {
                    spacing: 4px;
                    alignment: start;
                    
                    Text {
                        text: data.value;
                        font-size: compact ? 28px : 36px;
                        font-weight: 600;
                        color: white;
                        vertical-alignment: bottom;
                    }
                    
                    Text {
                        text: data.unit;
                        font-size: compact ? 14px : 16px;
                        color: #9E9E9E;
                        vertical-alignment: bottom;
                    }
                }
                
                // Trend indicator (if present)
                if data.trend != "" : HorizontalLayout {
                    spacing: 4px;
                    alignment: start;
                    
                    Text {
                        text: data.trend == "up" ? "↑" : 
                              data.trend == "down" ? "↓" : "→";
                        font-size: 12px;
                        color: data.trend == "up" ? #4CAF50 : 
                               data.trend == "down" ? #F44336 : #9E9E9E;
                    }
                    
                    Text {
                        text: data.trend-value;
                        font-size: 12px;
                        color: data.trend == "up" ? #4CAF50 : 
                               data.trend == "down" ? #F44336 : #9E9E9E;
                    }
                }
            }
        }
    }
}

